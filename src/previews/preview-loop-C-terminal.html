<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Loop — C: Terminal Session (v2)</title>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body { background: #0D0D1A; color: #F5F0E1; font-family: 'Courier New', monospace; overflow-x: hidden; }
:root {
  --bg-deep: #0D0D1A; --bg-dark: #1A1A2E; --bg-mid: #222240;
  --text-light: #F5F0E1; --text-muted: rgba(245, 240, 225, 0.5);
  --accent-gold: #FFD000; --score-green: #6BCB77; --score-yellow: #FFD93D; --score-red: #FF6B6B;
  --ease-enter: cubic-bezier(0.22, 0.61, 0.36, 1); --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ─── Section ─────────────────────────────────────── */
.loop-section {
  min-height: 100vh;
  background: var(--bg-deep);
  padding: 4rem 2rem 6rem;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.loop-title {
  font-size: 0.9rem;
  font-weight: 700;
  letter-spacing: 0.3em;
  color: var(--text-muted);
  margin-bottom: 0.5rem;
}
.loop-subtitle {
  font-size: 0.55rem;
  color: var(--text-muted);
  margin-bottom: 3rem;
}

/* ─── Terminal window ─────────────────────────────── */
.terminal {
  max-width: 620px;
  width: 100%;
  background: var(--bg-dark);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(245, 240, 225, 0.08);
}

.terminal-bar {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem;
  background: var(--bg-mid);
  border-bottom: 1px solid rgba(245, 240, 225, 0.06);
}
.terminal-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}
.terminal-dot.r { background: #FF5F57; }
.terminal-dot.y { background: #FFBD2E; }
.terminal-dot.g { background: #28CA42; }
.terminal-label {
  font-size: 0.5rem;
  color: var(--text-muted);
  letter-spacing: 0.08em;
  margin-left: auto;
}

.terminal-body {
  padding: 1.4rem 1.6rem;
  font-size: 0.6rem;
  line-height: 1.9;
}

/* ─── Terminal lines ──────────────────────────────── */
.term-line {
  opacity: 0;
  transform: translateY(4px);
  transition: opacity 300ms var(--ease-enter), transform 300ms var(--ease-enter);
  margin-bottom: 0.2rem;
}
.term-line.visible {
  opacity: 1;
  transform: translateY(0);
}

.term-prompt { color: var(--accent-gold); }
.term-cmd { color: var(--text-light); font-weight: 700; }
.term-out { color: var(--text-muted); padding-left: 0; }
.term-out.gold { color: var(--accent-gold); }
.term-out.green { color: var(--score-green); }
.term-out.bright { color: var(--text-light); font-weight: 700; }
.term-out.dim { color: rgba(245, 240, 225, 0.3); }
.term-indent { padding-left: 1rem; }

/* Phase header — stands out */
.term-phase {
  font-size: 0.5rem;
  font-weight: 800;
  letter-spacing: 0.12em;
  color: var(--accent-gold);
  margin-top: 0.4rem;
  margin-bottom: 0.1rem;
}

.term-divider {
  border: none;
  border-top: 1px solid rgba(245, 240, 225, 0.06);
  margin: 0.8rem 0;
}

.term-heavy-divider {
  border: none;
  margin: 0.5rem 0;
  font-size: 0.5rem;
  color: rgba(245, 240, 225, 0.15);
  letter-spacing: 0;
}

/* Blinking cursor */
.term-cursor {
  display: inline-block;
  width: 0.5em;
  height: 1.1em;
  background: var(--accent-gold);
  vertical-align: middle;
  animation: blink 1s step-end infinite;
  margin-left: 0.2rem;
}
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* ─── Council checklist ───────────────────────────── */
.term-check {
  color: var(--score-green);
}
.term-uncheck {
  color: rgba(245, 240, 225, 0.2);
}
.term-reviewer-name {
  display: inline-block;
  min-width: 7ch;
  color: var(--text-light);
}
.term-reviewer-desc {
  color: var(--text-muted);
}

/* ─── Traffic light row ───────────────────────────── */
.term-traffic {
  display: inline-flex;
  gap: 1rem;
  align-items: center;
}
.term-traffic-item {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
}
.term-traffic-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
}
.term-traffic-dot.r { background: var(--score-red); }
.term-traffic-dot.y { background: var(--score-yellow); }
.term-traffic-dot.g { background: var(--score-green); }

/* ─── Score comparison ────────────────────────────── */
.term-scores {
  display: flex;
  gap: 1.2rem;
  align-items: center;
  padding: 0.4rem 0;
}
.term-score-box { text-align: center; }
.term-score-label {
  font-size: 0.45rem;
  color: var(--text-muted);
  letter-spacing: 0.08em;
  font-weight: 700;
}
.term-score-val {
  font-size: 0.9rem;
  font-weight: 800;
}
.term-score-val.old { color: var(--score-yellow); }
.term-score-val.new { color: var(--score-green); }
.term-score-arrow {
  font-size: 0.7rem;
  color: var(--accent-gold);
}

/* ─── Summary block ───────────────────────────────── */
.term-summary {
  background: rgba(255, 208, 0, 0.04);
  border: 1px solid rgba(255, 208, 0, 0.12);
  border-radius: 4px;
  padding: 0.8rem 1rem;
  margin-top: 0.3rem;
}
.term-summary-title {
  font-size: 0.65rem;
  font-weight: 800;
  color: var(--accent-gold);
  letter-spacing: 0.1em;
  margin-bottom: 0.4rem;
}
.term-summary .term-out {
  padding-left: 0;
}
.term-summary .term-arrow {
  color: var(--accent-gold);
  margin-right: 0.3rem;
}

/* ─── Below terminal ──────────────────────────────── */
.loop-whisper {
  font-size: 0.55rem;
  color: var(--text-muted);
  margin-top: 2.5rem;
  opacity: 0;
  transition: opacity 600ms var(--ease-enter);
  text-align: center;
  max-width: 440px;
  line-height: 1.8;
}
.loop-whisper.visible { opacity: 1; }

.loop-cta-row {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
  opacity: 0;
  transition: opacity 600ms var(--ease-enter);
}
.loop-cta-row.visible { opacity: 1; }

.loop-cta {
  font-family: 'Courier New', monospace;
  font-size: 0.55rem;
  font-weight: 800;
  letter-spacing: 0.1em;
  padding: 0.7rem 1.4rem;
  border-radius: 3px;
  cursor: pointer;
  transition: all 150ms var(--ease-bounce);
  border: none;
}
.loop-cta.primary {
  background: var(--accent-gold);
  color: var(--bg-deep);
}
.loop-cta.primary:hover {
  transform: scale(1.05);
  box-shadow: 0 0 16px rgba(255, 208, 0, 0.3);
}
.loop-cta.secondary {
  background: none;
  color: var(--text-muted);
  border: 1px solid rgba(245, 240, 225, 0.15);
}
.loop-cta.secondary:hover {
  color: var(--text-light);
  border-color: rgba(245, 240, 225, 0.3);
}

@media (max-width: 680px) {
  .terminal-body { padding: 1rem; font-size: 0.55rem; }
  .loop-cta-row { flex-direction: column; align-items: center; }
}
</style>
</head>
<body>

<section class="loop-section" data-section="the-loop" data-testid="the-loop-section">
  <p class="loop-title">THE LOOP</p>
  <p class="loop-subtitle">From new design to proven improvement. Every cycle.</p>

  <div class="terminal" data-testid="loop-terminal">
    <div class="terminal-bar">
      <div class="terminal-dot r"></div>
      <div class="terminal-dot y"></div>
      <div class="terminal-dot g"></div>
      <div class="terminal-label">slap &mdash; session</div>
    </div>

    <div class="terminal-body">

      <!-- ═══ Phase 1: Analyze ═══ -->
      <div class="term-line" data-testid="loop-step-1">
        <span class="term-prompt">$ </span>
        <span class="term-cmd">/slap projects/FlowBoard/haiku.html</span>
      </div>

      <div class="term-line">
        <span class="term-out">Analyzing design...</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out gold">Detected: PM tool landing page</span>
      </div>
      <div class="term-line">
        <span class="term-out">Sections: hero, features, pricing, testimonials, cta</span>
      </div>
      <div class="term-line">
        <span class="term-out">Elements: 5 headlines, 3 CTAs, 3 pricing tiers</span>
      </div>
      <div class="term-line">
        <span class="term-out">Industry: Project management / SaaS</span>
      </div>

      <hr class="term-divider">

      <!-- ═══ Phase 3: Council ═══ -->
      <div class="term-line" data-testid="loop-step-2">
        <span class="term-out bright">REVIEW COUNCIL for FlowBoard (haiku)</span>
      </div>
      <div class="term-line">
        <div class="term-heavy-divider">&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;&boxh;</div>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">EXPERTS (5 &mdash; always included):</span>
      </div>
      <div class="term-line">
        <span class="term-out indent">Marketing, UX, Product, Technical, Design</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">PERSONAS &mdash; recommended 8 of 18:</span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-check">[x]</span> <span class="term-reviewer-name">frank</span> <span class="term-reviewer-desc">Zero Patience &mdash; PM tool fatigue</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-check">[x]</span> <span class="term-reviewer-name">elena</span> <span class="term-reviewer-desc">Screen Reader &mdash; board navigation</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-check">[x]</span> <span class="term-reviewer-name">carlos</span> <span class="term-reviewer-desc">CEO Evaluating &mdash; ROI first scroll</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-check">[x]</span> <span class="term-reviewer-name">jasmine</span> <span class="term-reviewer-desc">Support Rep &mdash; will get tickets</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-check">[x]</span> <span class="term-reviewer-name">sam</span> <span class="term-reviewer-desc">One Thumb &mdash; on-the-go PM</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-uncheck">[ ]</span> <span class="term-reviewer-name dim">marcus</span> <span class="term-out dim">(no color-critical UI detected)</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-uncheck">[ ]</span> <span class="term-reviewer-name dim">kevin</span> <span class="term-out dim">(not target demographic)</span></span>
      </div>
      <div class="term-line">
        <span class="term-out term-indent"><span class="term-out dim">... 3 more skipped</span></span>
      </div>

      <hr class="term-divider">

      <!-- ═══ Phase 4: Persona briefs ═══ -->
      <div class="term-line" data-testid="loop-step-3">
        <span class="term-out bright">GENERATING PERSONA BRIEFS</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out green">&check;</span> <span class="term-out">frank.md &mdash; Team lead, burned by 3 PM tools. Has 4 minutes.</span>
      </div>
      <div class="term-line">
        <span class="term-out green">&check;</span> <span class="term-out">elena.md &mdash; Screen reader. Board navigation matters.</span>
      </div>
      <div class="term-line">
        <span class="term-out green">&check;</span> <span class="term-out">carlos.md &mdash; CEO. ROI in the first scroll or he's gone.</span>
      </div>
      <div class="term-line">
        <span class="term-out green">&check;</span> <span class="term-out">marketing.md &mdash; Differentiation from Asana in 5 seconds?</span>
      </div>
      <div class="term-line">
        <span class="term-out dim">... 9 more briefs generated</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">13 persona briefs <span class="term-out gold">&rarr;</span> projects/FlowBoard/personas/</span>
      </div>

      <hr class="term-divider">

      <!-- ═══ Phase 5: Reviews ═══ -->
      <div class="term-line" data-testid="loop-step-4">
        <span class="term-out bright">GENERATING REVIEWS</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">13 reviewers evaluating 5 sections...</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">Findings: </span>
        <span class="term-traffic">
          <span class="term-traffic-item"><span class="term-traffic-dot r"></span> 8 red</span>
          <span class="term-traffic-item"><span class="term-traffic-dot y"></span> 22 yellow</span>
          <span class="term-traffic-item"><span class="term-traffic-dot g"></span> 18 green</span>
        </span>
      </div>
      <div class="term-line">
        <span class="term-out">Every finding references your actual content. Not a template.</span>
      </div>

      <hr class="term-divider">

      <!-- ═══ Phase 7: Summary ═══ -->
      <div class="term-line" data-testid="loop-step-5">
        <div class="term-summary">
          <div class="term-summary-title">SLAP COMPLETE &mdash; FlowBoard (haiku)</div>
          <div class="term-line visible">
            <span class="term-out">Persona briefs: 13 files (5 expert + 8 persona)</span>
          </div>
          <div class="term-line visible">
            <span class="term-out"><span class="term-arrow">&rarr;</span> projects/FlowBoard/personas/</span>
          </div>
          <div class="term-line visible"><span class="term-out">&nbsp;</span></div>
          <div class="term-line visible">
            <span class="term-out">Annotated HTML: public/projects/FlowBoard/haiku.html</span>
          </div>
          <div class="term-line visible">
            <span class="term-out"><span class="term-arrow">&rarr;</span> 5 sections, 12 data-ref elements</span>
          </div>
          <div class="term-line visible"><span class="term-out">&nbsp;</span></div>
          <div class="term-line visible">
            <span class="term-out">Review data: src/data/flowboardReviews.ts</span>
          </div>
          <div class="term-line visible">
            <span class="term-out"><span class="term-arrow">&rarr;</span> 13 reviewers, avg score <span class="term-out gold">5.8</span></span>
          </div>
        </div>
      </div>

      <hr class="term-divider">

      <!-- ═══ The iterate step ═══ -->
      <div class="term-line" data-testid="loop-step-iterate">
        <span class="term-out gold">SELECT FEEDBACK &rarr; COPY PROMPT &rarr; PASTE INTO CLAUDE</span>
      </div>
      <div class="term-line">
        <span class="term-out">Improved HTML generated as v2...</span>
      </div>

      <hr class="term-divider">

      <!-- ═══ v2: re-slap ═══ -->
      <div class="term-line" data-testid="loop-step-6">
        <span class="term-prompt">$ </span>
        <span class="term-cmd">/slap projects/FlowBoard/v2.html --parent haiku</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>
      <div class="term-line">
        <span class="term-out">Reusing existing persona briefs...</span>
      </div>
      <div class="term-line">
        <span class="term-out bright">V2 SCORES:</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>

      <div class="term-line">
        <div class="term-scores">
          <div class="term-score-box">
            <div class="term-score-label">HAIKU</div>
            <div class="term-score-val old">5.8</div>
          </div>
          <div class="term-score-arrow">&rarr;</div>
          <div class="term-score-box">
            <div class="term-score-label">V2</div>
            <div class="term-score-val new">7.2</div>
          </div>
        </div>
      </div>

      <div class="term-line">
        <span class="term-out green">+1.4 avg improvement across 13 reviewers</span>
      </div>
      <div class="term-line"><span class="term-out">&nbsp;</span></div>

      <!-- ═══ Loop back ═══ -->
      <div class="term-line" data-testid="loop-step-repeat">
        <span class="term-prompt">$ </span>
        <span class="term-cursor"></span>
      </div>

    </div>
  </div>

  <!-- Whisper -->
  <p class="loop-whisper" data-testid="loop-whisper">
    Generic feedback produces generic designs.<br>
    Grounded feedback produces craft.
  </p>

  <!-- CTA -->
  <div class="loop-cta-row" data-testid="loop-cta-row">
    <button class="loop-cta primary" data-testid="loop-cta-try">TRY WITH YOUR DESIGN</button>
    <button class="loop-cta secondary" data-testid="loop-cta-demo">EXPLORE FLOWBOARD DEMO</button>
  </div>
</section>

<script>
const lines = document.querySelectorAll('.terminal-body > .term-line, .loop-whisper, .loop-cta-row');
function reveal() {
  const terminal = document.querySelector('.terminal');
  if (!terminal) return;
  const rect = terminal.getBoundingClientRect();
  if (rect.top < window.innerHeight * 0.7) {
    lines.forEach((el, i) => {
      if (!el.classList.contains('visible')) {
        setTimeout(() => el.classList.add('visible'), i * 90);
      }
    });
  }
}
reveal();
window.addEventListener('scroll', reveal);
setTimeout(reveal, 300);
</script>

</body>
</html>
